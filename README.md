Микросервисная система бронирования гостиничных номеров с использованием Spring Boot, Spring Cloud, Eureka, API Gateway и JWT-аутентификации.
Проект реализует базовые бизнес-сценарии бронирования номеров с обеспечением согласованности данных между сервисами.
# Архитектура системы
Система состоит из следующих сервисов:
- Eureka Server — сервис регистрации и обнаружения
- API Gateway — единая точка входа, маршрутизация и первичная безопасность
- Booking Service — управление бронированиями
- Hotel Service — управление отелями, номерами и статистикой
# Архитектурная схема (логическая)

```
┌─────────────┐
│   Client    │
└──────┬──────┘
       ▼
┌─────────────────┐      ┌──────────────┐
│  API Gateway    │◄────►│    Eureka    │
└────────┬────────┘      └──────────────┘
    ┌────┴────┐
    ▼         ▼
┌─────────┐ ┌─────────┐
│ Booking │ │  Hotel  │
│ Service │◄┤ Service │
└─────────┘ └─────────┘
```
# Безопасность
Используется JWT-аутентификация

Роли пользователей:
- USER — создание и просмотр собственных бронирований
- ADMIN — управление отелями и номерами

JWT валидируется на Gateway повторно проверяется каждым сервисом (Resource Server)
# Бизнес-логика бронирования
Статусы бронирования:
- PENDING — создано, ожидает подтверждения от Hotel Service
- CONFIRMED — номер успешно забронирован
- CANCELLED — отменено при ошибке или отказе

### Алгоритм выбора номера:
- Получение списка доступных номеров
- Сортировка:
по timesBooked (возрастание) при равенстве — по id
- Выбор первого доступного номера
- Подтверждение бронирования через Hotel Service
- 
# Запуск проекта
Требования
- Java 17+
- Maven

### Порядок запуска
- Eureka Server
```
cd eureka-server
mvn spring-boot:run
```
- Hotel Service
```
cd hotel-service
mvn spring-boot:run
```
- Booking Service
```
cd booking-service
mvn spring-boot:run
```
#### После запуска:
- Eureka: http://localhost:8761
- Gateway: http://localhost:8080
# API
### Booking Service
- POST /bookings
- GET /bookings
- GET /bookings/{id}
- DELETE /bookings/{id}
### Hotel Service
- POST /hotels
- POST /rooms
- GET /hotels
- GET /rooms
# Тестирование
- Используется JUnit 5
- Покрыты базовые позитивные и негативные сценарии
- Тесты не зависят от внешнего окружения
# ADR
#### Использование микросервисной архитектуры
Причина:
Необходимость разделения ответственности между бронированием и управлением отелями. 

Решение:
Использованы отдельные сервисы с взаимодействием через REST и Eureka.
#### Saga вместо распределённых транзакций
Причина:
Избежание сложности 2PC и tight coupling сервисов. 

Решение:
Реализована двухшаговая сага со статусами PENDING / CONFIRMED / CANCELLED.
#### JWT-аутентификация
Причина:
Stateless-аутентификация и совместимость с Gateway. 

Решение:
JWT проверяется на Gateway и повторно валидируется сервисами.
